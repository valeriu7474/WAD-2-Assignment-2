{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\src\\\\contexts\\\\authContext.js\";\nimport React, { useState, createContext } from \"react\";\nimport { login, signup } from \"../api/movie-api\";\nexport var AuthContext = createContext(null);\n\nvar AuthContextProvider = props => {\n  var existingToken = localStorage.getItem(\"token\");\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var _useState3 = useState(existingToken),\n      _useState4 = _slicedToArray(_useState3, 2),\n      authToken = _useState4[0],\n      setAuthToken = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userName = _useState6[0],\n      setUserName = _useState6[1];\n\n  var setToken = data => {\n    localStorage.setItem(\"token\", data);\n    setAuthToken(data);\n  };\n\n  var authenticate = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username, password) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return login(username, password);\n\n            case 2:\n              result = _context.sent;\n\n              if (result.token) {\n                setToken(result.token);\n                setIsAuthenticated(true);\n                setUserName(username);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function authenticate(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var register = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username, password) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return signup(username, password);\n\n            case 2:\n              result = _context2.sent;\n              console.log(result.code);\n              return _context2.abrupt(\"return\", result.code === 201 ? true : false);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function register(_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signout = () => {\n    setTimeout(() => setIsAuthenticated(false), 100);\n  };\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      authenticate,\n      register,\n      signout,\n      userName\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default AuthContextProvider;","map":{"version":3,"sources":["C:/Users/vblas/Desktop/COLLEGE/Year 3/Web App 2/wad2-Assignment2/moviesApp/src/contexts/authContext.js"],"names":["React","useState","createContext","login","signup","AuthContext","AuthContextProvider","props","existingToken","localStorage","getItem","isAuthenticated","setIsAuthenticated","authToken","setAuthToken","userName","setUserName","setToken","data","setItem","authenticate","username","password","result","token","register","console","log","code","signout","setTimeout","children"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,aAA1B,QAA+C,OAA/C;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,kBAA9B;AAEA,OAAO,IAAMC,WAAW,GAAGH,aAAa,CAAC,IAAD,CAAjC;;AAEP,IAAMI,mBAAmB,GAAIC,KAAD,IAAW;AACrC,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAtB;;AADqC,kBAEST,QAAQ,CAAC,KAAD,CAFjB;AAAA;AAAA,MAE9BU,eAF8B;AAAA,MAEbC,kBAFa;;AAAA,mBAGHX,QAAQ,CAACO,aAAD,CAHL;AAAA;AAAA,MAG9BK,SAH8B;AAAA,MAGnBC,YAHmB;;AAAA,mBAILb,QAAQ,CAAC,EAAD,CAJH;AAAA;AAAA,MAI9Bc,QAJ8B;AAAA,MAIpBC,WAJoB;;AAOrC,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACzBT,IAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BD,IAA9B;AACAJ,IAAAA,YAAY,CAACI,IAAD,CAAZ;AACD,GAHD;;AAKA,MAAME,YAAY;AAAA,wEAAG,iBAAOC,QAAP,EAAiBC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACEnB,KAAK,CAACkB,QAAD,EAAWC,QAAX,CADP;;AAAA;AACbC,cAAAA,MADa;;AAEnB,kBAAIA,MAAM,CAACC,KAAX,EAAkB;AAChBP,gBAAAA,QAAQ,CAACM,MAAM,CAACC,KAAR,CAAR;AACAZ,gBAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAI,gBAAAA,WAAW,CAACK,QAAD,CAAX;AACD;;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZD,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASA,MAAMK,QAAQ;AAAA,yEAAG,kBAAOJ,QAAP,EAAiBC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACMlB,MAAM,CAACiB,QAAD,EAAWC,QAAX,CADZ;;AAAA;AACTC,cAAAA,MADS;AAEfG,cAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,IAAnB;AAFe,gDAGPL,MAAM,CAACK,IAAP,KAAgB,GAAjB,GAAwB,IAAxB,GAA+B,KAHvB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARH,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAMA,MAAMI,OAAO,GAAG,MAAM;AACpBC,IAAAA,UAAU,CAAC,MAAMlB,kBAAkB,CAAC,KAAD,CAAzB,EAAkC,GAAlC,CAAV;AACD,GAFD;;AAIA,sBACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLD,MAAAA,eADK;AAELS,MAAAA,YAFK;AAGLK,MAAAA,QAHK;AAILI,MAAAA,OAJK;AAKLd,MAAAA;AALK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASGR,KAAK,CAACwB,QATT,CADF;AAaD,CA5CD;;AA8CA,eAAezB,mBAAf","sourcesContent":["import React, { useState, createContext } from \"react\";\r\nimport { login, signup } from \"../api/movie-api\";\r\n\r\nexport const AuthContext = createContext(null);\r\n\r\nconst AuthContextProvider = (props) => {\r\n  const existingToken = localStorage.getItem(\"token\");\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [authToken, setAuthToken] = useState(existingToken);\r\n  const [userName, setUserName] = useState(\"\");\r\n\r\n\r\n  const setToken = (data) => {\r\n    localStorage.setItem(\"token\", data);\r\n    setAuthToken(data);\r\n  }\r\n\r\n  const authenticate = async (username, password) => {\r\n    const result = await login(username, password);\r\n    if (result.token) {\r\n      setToken(result.token)\r\n      setIsAuthenticated(true);\r\n      setUserName(username);\r\n    }\r\n  };\r\n\r\n  const register = async (username, password) => {\r\n    const result = await signup(username, password);\r\n    console.log(result.code);\r\n    return (result.code === 201) ? true : false;\r\n  };\r\n\r\n  const signout = () => {\r\n    setTimeout(() => setIsAuthenticated(false), 100);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        authenticate,\r\n        register,\r\n        signout,\r\n        userName,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContextProvider;"]},"metadata":{},"sourceType":"module"}
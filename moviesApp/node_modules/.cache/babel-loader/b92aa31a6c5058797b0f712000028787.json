{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\vblas\\\\Desktop\\\\COLLEGE\\\\Year 3\\\\Web App 2\\\\wad2-Assignment2\\\\moviesApp\\\\src\\\\contexts\\\\moviesContext.js\";\nimport React, { useContext, useState, useEffect, createContext, useReducer } from \"react\";\nimport { getMovies, getUpcomingMovies, getTopRated, getFavourites, getWatchLater } from \"../api/movie-api\";\nexport var MoviesContext = createContext(null);\n\nvar reducer = (state, action) => {\n  switch (action.type) {\n    case \"add-favorite\":\n      return {\n        movies: state.movies.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          favorite: true\n        }) : m),\n        toprated: [...state.toprated],\n        upcoming: [...state.upcoming],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"remove-favorite\":\n      return {\n        movies: state.movies.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          favorite: false\n        }) : m),\n        toprated: [...state.toprated],\n        upcoming: [...state.upcoming],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"watch-list\":\n      return {\n        upcoming: state.upcoming.map(u => u.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, u), {}, {\n          watchL: true\n        }) : u),\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"remove-watch\":\n      return {\n        upcoming: state.upcoming.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          watchL: false\n        }) : m),\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"load\":\n      return {\n        movies: action.payload.movies,\n        upcoming: [...state.upcoming],\n        toprated: [...state.toprated],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"load-upcoming\":\n      return {\n        upcoming: action.payload.movies,\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"load-toprated\":\n      return {\n        toprated: action.payload.toprated,\n        movies: [...state.movies],\n        upcoming: [...state.upcoming],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"load-favoriteMovies\":\n      console.log(action.payload.favoriteMovies);\n      return {\n        favoriteMovies: action.payload.favoriteMovies,\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        upcoming: [...state.upcoming],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    case \"load-watchLMovies\":\n      console.log(action.payload.watchLMovies);\n      return {\n        watchLMovies: action.payload.watchLMovies,\n        movies: [...state.movies],\n        toprated: [...state.toprated],\n        upcoming: [...state.upcoming],\n        favoriteMovies: [...state.favoriteMovies]\n      };\n\n    case \"add-review\":\n      return {\n        movies: state.movies.map(m => m.id === action.payload.movie.id ? _objectSpread(_objectSpread({}, m), {}, {\n          review: action.payload.review\n        }) : m),\n        upcoming: [...state.upcoming],\n        toprated: [...state.toprated],\n        favoriteMovies: [...state.favoriteMovies],\n        watchLMovies: [...state.watchLMovies]\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar MoviesContextProvider = props => {\n  var _useReducer = useReducer(reducer, {\n    movies: [],\n    upcoming: [],\n    toprated: [],\n    favoriteMovies: [],\n    watchLMovies: []\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      authenticated = _useState2[0],\n      setAuthenticated = _useState2[1];\n\n  var addToFavorites = movieId => {\n    var index = state.movies.map(m => m.id).indexOf(movieId);\n    dispatch({\n      type: \"add-favorite\",\n      payload: {\n        movie: state.movies[index]\n      }\n    });\n  };\n\n  var removeFavorites = movieId => {\n    var index = state.movies.map(m => m.id).indexOf(movieId);\n    dispatch({\n      type: \"remove-favorite\",\n      payload: {\n        movie: state.movies[index]\n      }\n    });\n  };\n\n  var addToWatchList = movieId => {\n    var index = state.upcoming.map(u => u.id).indexOf(movieId);\n    dispatch({\n      type: \"watch-list\",\n      payload: {\n        movie: state.upcoming[index]\n      }\n    });\n  };\n\n  var removeWatch = movieId => {\n    var index = state.upcoming.map(u => u.id).indexOf(movieId);\n    dispatch({\n      type: \"remove-watch\",\n      payload: {\n        movie: state.upcoming[index]\n      }\n    });\n  };\n\n  var addReview = (movie, review) => {\n    dispatch({\n      type: \"add-review\",\n      payload: {\n        movie,\n        review\n      }\n    });\n  };\n\n  useEffect(() => {\n    getMovies().then(movies => {\n      dispatch({\n        type: \"load\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getUpcomingMovies().then(movies => {\n      dispatch({\n        type: \"load-upcoming\",\n        payload: {\n          movies\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    getTopRated().then(toprated => {\n      dispatch({\n        type: \"load-toprated\",\n        payload: {\n          toprated\n        }\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  var getFavouriteMovies = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              getFavourites(username).then(favoriteMovies => {\n                dispatch({\n                  type: \"load-favoriteMovies\",\n                  payload: {\n                    favoriteMovies\n                  }\n                });\n                console.log(favoriteMovies);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getFavouriteMovies(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getWatchLaterMovies = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              getWatchLater(username).then(watchLMovies => {\n                dispatch({\n                  type: \"load-watchLMovies\",\n                  payload: {\n                    watchLMovies\n                  }\n                });\n                console.log(watchLMovies);\n              });\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getWatchLaterMovies(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(MoviesContext.Provider, {\n    value: {\n      movies: state.movies,\n      upcoming: state.upcoming,\n      toprated: state.toprated,\n      favoriteMovies: state.favoriteMovies,\n      watchLMovies: state.watchLMovies,\n      addToWatchList: addToWatchList,\n      removeWatch: removeWatch,\n      addToFavorites: addToFavorites,\n      removeFavorites: removeFavorites,\n      addReview: addReview,\n      setAuthenticated\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default MoviesContextProvider;","map":{"version":3,"sources":["C:/Users/vblas/Desktop/COLLEGE/Year 3/Web App 2/wad2-Assignment2/moviesApp/src/contexts/moviesContext.js"],"names":["React","useContext","useState","useEffect","createContext","useReducer","getMovies","getUpcomingMovies","getTopRated","getFavourites","getWatchLater","MoviesContext","reducer","state","action","type","movies","map","m","id","payload","movie","favorite","toprated","upcoming","favoriteMovies","watchLMovies","u","watchL","console","log","review","MoviesContextProvider","props","dispatch","authenticated","setAuthenticated","addToFavorites","movieId","index","indexOf","removeFavorites","addToWatchList","removeWatch","addReview","then","getFavouriteMovies","username","getWatchLaterMovies","children"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, createContext, useReducer } from \"react\";\r\nimport { getMovies, getUpcomingMovies, getTopRated, getFavourites, getWatchLater } from \"../api/movie-api\";\r\n\r\nexport const MoviesContext = createContext(null);\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"add-favorite\":\r\n      return {\r\n        movies: state.movies.map((m) =>\r\n          m.id === action.payload.movie.id ? { ...m, favorite: true } : m\r\n        ),\r\n      toprated: [...state.toprated],\r\n      upcoming: [...state.upcoming],\r\n      favoriteMovies:[...state.favoriteMovies],\r\n      watchLMovies:[...state.watchLMovies],\r\n      };\r\n    case \"remove-favorite\":\r\n    return {\r\n      movies: state.movies.map((m) =>\r\n        m.id === action.payload.movie.id ? { ...m, favorite: false } : m\r\n      ),\r\n      toprated: [...state.toprated],\r\n      upcoming: [...state.upcoming],\r\n      favoriteMovies:[...state.favoriteMovies],\r\n      watchLMovies:[...state.watchLMovies],\r\n    };\r\n    case \"watch-list\":\r\n      return {\r\n        upcoming: state.upcoming.map((u) =>\r\n          u.id === action.payload.movie.id ? { ...u, watchL: true } : u\r\n        ),\r\n        movies: [...state.movies],\r\n        toprated: [...state.toprated],\r\n        favoriteMovies:[...state.favoriteMovies],\r\n        watchLMovies:[...state.watchLMovies],\r\n      };\r\n    case \"remove-watch\":\r\n      return {\r\n        upcoming: state.upcoming.map((m) =>\r\n          m.id === action.payload.movie.id ? { ...m, watchL: false } : m\r\n        ),\r\n        movies: [...state.movies],\r\n        toprated: [...state.toprated],\r\n        favoriteMovies:[...state.favoriteMovies],\r\n        watchLMovies:[...state.watchLMovies],\r\n      };\r\n    case \"load\":\r\n      return { movies: action.payload.movies, upcoming: [...state.upcoming], toprated: [...state.toprated], favoriteMovies:[...state.favoriteMovies], watchLMovies:[...state.watchLMovies] };\r\n    case \"load-upcoming\":\r\n      return { upcoming: action.payload.movies, movies: [...state.movies], toprated: [...state.toprated], favoriteMovies:[...state.favoriteMovies], watchLMovies:[...state.watchLMovies] };\r\n    case \"load-toprated\":\r\n      return { toprated: action.payload.toprated, movies: [...state.movies], upcoming: [...state.upcoming], favoriteMovies:[...state.favoriteMovies], watchLMovies:[...state.watchLMovies] };\r\n    case \"load-favoriteMovies\":\r\n      console.log(action.payload.favoriteMovies)\r\n      return { favoriteMovies: action.payload.favoriteMovies, movies: [...state.movies], toprated:[...state.toprated], upcoming:[...state.upcoming], watchLMovies:[...state.watchLMovies] };\r\n    case \"load-watchLMovies\":\r\n      console.log(action.payload.watchLMovies)\r\n      return { watchLMovies: action.payload.watchLMovies, movies: [...state.movies], toprated:[...state.toprated], upcoming:[...state.upcoming], favoriteMovies:[...state.favoriteMovies] };\r\n    case \"add-review\":\r\n      return {\r\n        movies: state.movies.map((m) =>\r\n          m.id === action.payload.movie.id\r\n            ? { ...m, review: action.payload.review }\r\n            : m\r\n        ),\r\n        upcoming: [...state.upcoming],\r\n        toprated: [...state.toprated],\r\n        favoriteMovies:[...state.favoriteMovies],\r\n        watchLMovies:[...state.watchLMovies],\r\n      };\r\n    default:\r\n      return state;\r\n      }\r\n};\r\n\r\nconst MoviesContextProvider = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, { movies: [], upcoming: [], toprated: [], favoriteMovies:[], watchLMovies:[]});\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n\r\n  const addToFavorites = (movieId) => {\r\n    const index = state.movies.map((m) => m.id).indexOf(movieId);\r\n    dispatch({ type: \"add-favorite\", payload: { movie: state.movies[index]} });\r\n  };\r\n\r\n  const removeFavorites = (movieId) => {\r\n    const index = state.movies.map((m) => m.id).indexOf(movieId);\r\n    dispatch({ type: \"remove-favorite\", payload: { movie: state.movies[index]} });\r\n  };\r\n\r\n  const addToWatchList = (movieId) => {\r\n    const index = state.upcoming.map((u) => u.id).indexOf(movieId);\r\n    dispatch({ type: \"watch-list\", payload: { movie: state.upcoming[index] } });\r\n  };\r\n\r\n  const removeWatch = (movieId) => {\r\n    const index = state.upcoming.map((u) => u.id).indexOf(movieId);\r\n    dispatch({ type: \"remove-watch\", payload: { movie: state.upcoming[index] } });\r\n  };\r\n\r\n  const addReview = (movie, review) => {\r\n    dispatch({ type: \"add-review\", payload: { movie, review } });\r\n  }; \r\n\r\n  useEffect(() => {\r\n    getMovies().then((movies) => {\r\n      dispatch({ type: \"load\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getUpcomingMovies().then((movies) => {\r\n      dispatch({ type: \"load-upcoming\", payload: { movies } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getTopRated().then((toprated) => {\r\n      dispatch({ type: \"load-toprated\", payload: { toprated } });\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n\r\n  const getFavouriteMovies = async (username) => {\r\n    getFavourites(username).then((favoriteMovies) => {\r\n    dispatch({ type: \"load-favoriteMovies\", payload: { favoriteMovies } });\r\n    console.log(favoriteMovies);\r\n    });\r\n  }\r\n\r\n  const getWatchLaterMovies = async (username) => {\r\n    getWatchLater(username).then((watchLMovies) => {\r\n    dispatch({ type: \"load-watchLMovies\", payload: { watchLMovies } });\r\n    console.log(watchLMovies);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <MoviesContext.Provider\r\n      value={{\r\n        movies: state.movies,\r\n        upcoming: state.upcoming,\r\n        toprated: state.toprated,\r\n        favoriteMovies:state.favoriteMovies,\r\n        watchLMovies:state.watchLMovies,\r\n        addToWatchList: addToWatchList,\r\n        removeWatch: removeWatch,\r\n        addToFavorites: addToFavorites,\r\n        removeFavorites: removeFavorites,\r\n        addReview: addReview,\r\n        setAuthenticated\r\n      }}\r\n    >\r\n      {props.children}\r\n    </MoviesContext.Provider>\r\n  );\r\n};\r\nexport default MoviesContextProvider;"]},"metadata":{},"sourceType":"module"}